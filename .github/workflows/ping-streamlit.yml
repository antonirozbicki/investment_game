name: Ping Streamlit app

on:
  schedule:
    - cron: "0 7 * * *"  # codziennie 07:00 UTC (~08:00 w Polsce zimÄ…, ~09:00 latem)
  workflow_dispatch: {}

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping app (retry)
        run: |
          set -e
          URL="https://investmentgame.streamlit.app/"
          for i in 1 2 3 4 5; do
            echo "Attempt $i..."
            if curl -fsSL -m 20 "$URL" > /dev/null; then
              echo "OK"
              exit 0
            fi
            sleep 10
          done
          echo "Ping failed after retries"
          exit 1
