name: Ping Streamlit app

on:
  schedule:
    - cron: "0 7 * * *"   # codziennie 07:00 UTC
  workflow_dispatch: {}

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Streamlit
        run: |
          URL="https://investmentgame.streamlit.app/"
          echo "Pinging $URL"

          # retry + follow redirects + sensowny timeout + fail na z≈Çych statusach
          curl -sS -L \
            -A "Mozilla/5.0 (GitHub Actions ping)" \
            --retry 5 \
            --retry-all-errors \
            --connect-timeout 15 \
            --max-time 120 \
            -o /dev/null \
            -w "HTTP %{http_code}\n" \
            "$URL"
